<app-view id="NewOrderView" extends="BaseView">

    <h2>Добавление заказа</h2>

    <view-component name="CalendarComponent" class="select-date"></view-component>


    <div class="selector">
        <span class="label">Клиент:</span> <span class="select"><select id="current-client"></select></span>
    </div>

    <div class="selector">
        <span class="label">Дата заказа:</span> <input id="order-date" class="show-calendar" readonly="readonly"
                            placeholder="Нажмите для выбора...">
    </div>

    <div class="selector">
        <span class="label">Дата вылета:</span> <input id="flight-date" class="show-calendar" readonly="readonly"
                            placeholder="Нажмите для выбора...">
    </div>

    <div class="selector">
        <span class="label">Город вылета:</span> <span class="select"><select id="from-city"></select></span>
    </div>

    <div class="selector">
        <span class="label">Город прилёта:</span> <span class="select"><select id="to-city"></select></span>
    </div>


    <div class="selector">
        <span class="label">Обратный вылет:</span> <input id="reverse-flight-date" class="show-calendar"
                                                          readonly="readonly"
                                                       placeholder="Нажмите для выбора...">
    </div>


    <br>
    <div class="form-buttons">
        <button type="button" id="reverse">Не искать обратные билеты</button>
    </div>
    <br>


    <view-for variable="text" in="[$.error]">
        <view-eval value="text" class="form-error"></view-eval>
    </view-for>

    <br>


    <view-for variable="flight" in="$.flights" class="flight-list">
        <div class="flight">
            <div class="flight-title-bar">

                <div class="flight-title flight-inline">
                    <view-eval value="flight.fromAirportCode"></view-eval>
                    <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                    <view-eval value="flight.toAirportCode"></view-eval>
                </div>

                <div class="flight-code">
                    <view-eval value="flight.flightDisplayCode"></view-eval>
                </div>

            </div>

            <div class="flight-start flight-inline">
                <view-eval value="flight.flightDisplayName"></view-eval>
            </div>

            <div class="flight-start flight-inline">
                <span class="flight-no-accent">Начало в</span>
                <view-eval value="flight.formattedDateStart"></view-eval>
            </div>

            <div class="flight-end flight-inline">
                <span class="flight-no-accent">Окончание в</span>
                <view-eval value="flight.formattedDateEnd"></view-eval>
            </div>


            <div class="flight-data">
                <view-if condition="flight.children.length > 0" static>
                    <view-then>
                        <link-to route="DetailsRoute" args="{id: flight.id}">
                            Посмотреть данные стыковых рейсов
                        </link-to>
                    </view-then><view-else>Прямой рейс</view-else>
                </view-if>
            </div>
        </div>
    </view-for>


    <view-if condition="$.reverseFlights.length > 0">
        <view-then><br><br><h2>Обратные билеты</h2></view-then>
        <view-else></view-else>
    </view-if>


    <view-for variable="flight" in="$.reverseFlights" class="reverse-flight-list">
        <div class="flight">
            <div class="flight-title-bar">

                <div class="flight-title flight-inline">
                    <view-eval value="flight.fromAirportCode"></view-eval>
                    <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                    <view-eval value="flight.toAirportCode"></view-eval>
                </div>

                <div class="flight-code">
                    <view-eval value="flight.flightDisplayCode"></view-eval>
                </div>

            </div>

            <div class="flight-start flight-inline">
                <view-eval value="flight.flightDisplayName"></view-eval>
            </div>

            <div class="flight-start flight-inline">
                <span class="flight-no-accent">Начало в</span>
                <view-eval value="flight.formattedDateStart"></view-eval>
            </div>

            <div class="flight-end flight-inline">
                <span class="flight-no-accent">Окончание в</span>
                <view-eval value="flight.formattedDateEnd"></view-eval>
            </div>


            <br>
            <div class="flight-data">
                <view-if condition="flight.children.length > 0" static>
                    <view-then>
                        <link-to route="DetailsRoute" args="{id: flight.id}">
                            Посмотреть данные стыковых рейсов
                        </link-to>
                    </view-then><view-else>Прямой рейс</view-else>
                </view-if>
            </div>
        </div>
    </view-for>

    <br>
    <div class="form-buttons">
        <button type="button" id="order" class="order-button">Забронировать</button>
    </div>

</app-view>
