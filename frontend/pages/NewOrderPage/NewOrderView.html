<app-view id="NewOrderView" extends="BaseView">

    <h2>Добавление заказа</h2>

    <view-component name="CalendarComponent" class="select-date"></view-component>


    <div class="selector">
        <span class="label">Клиент:</span> <span class="select"><select id="current-client"></select></span>
    </div>

    <div class="selector">
        <span class="label">Дата заказа:</span> <input id="order-date" class="show-calendar" readonly="readonly"
                            placeholder="Нажмите для выбора...">
    </div>

    <div class="selector">
        <span class="label">Дата вылета:</span> <input id="flight-date" class="show-calendar" readonly="readonly"
                            placeholder="Нажмите для выбора...">
    </div>

    <div class="selector">
        <span class="label">Город вылета:</span> <span class="select"><select id="from-city"></select></span>
    </div>

    <div class="selector">
        <span class="label">Город прилёта:</span> <span class="select"><select id="to-city"></select></span>
    </div>


    <div class="selector">
        <span class="label">Обратный вылет:</span> <input id="reverse-flight-date" class="show-calendar"
                                                          readonly="readonly"
                                                       placeholder="Нажмите для выбора...">
    </div>


    <br>
    <div class="form-buttons">
        <button type="button" id="reverse">Не искать обратные билеты</button>
    </div>
    <br>


    <view-for variable="text" in="[$.error]">
        <view-eval value="text" class="form-error"></view-eval>
    </view-for>

    <br>


    <view-for variable="flight" in="$.flights" class="flight-list flights">
        <div class="flight">

            <div class="flights-data" style="display: none;" x-data="${flight.flights.map(x => x.id).join(',')}">
            </div>

            <view-for variable="f" in="flight.flights" static>

                <div class="flight-title-bar">

                    <div class="flight-title flight-inline">
                        <view-eval value="f.fromAirportCode"></view-eval>
                        <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                        <view-eval value="f.toAirportCode"></view-eval>
                    </div>

                    <div class="flight-code">
                        <view-eval value="f.flightDisplayCode"></view-eval>
                    </div>

                </div>

                <div class="flight-start flight-inline">
                    <view-eval value="f.flightDisplayName"></view-eval>
                </div>

                <div class="flight-start flight-inline">
                    <span class="flight-no-accent">Начало в</span>
                    <view-eval value="f.formattedDateStart"></view-eval>
                </div>

                <div class="flight-end flight-inline">
                    <span class="flight-no-accent">Окончание в</span>
                    <view-eval value="f.formattedDateEnd"></view-eval>
                </div>
            </view-for>


            <br>
            <div class="flight-data">
                <view-if condition="flight.children.length > 1" static>
                    <view-then>Несколько стыковых рейсов</view-then>
                    <view-else>Прямой рейс</view-else>
                </view-if>
            </div>
        </div>
    </view-for>


    <view-if condition="$.reverseFlights.length > 0">
        <view-then><br><br><h2>Обратные билеты</h2></view-then>
        <view-else></view-else>
    </view-if>


    <view-for variable="flight" in="$.reverseFlights" class="reverse-flight-list flights">
        <div class="flight">

            <div class="flights-data" style="display: none;" x-data="${flight.flights.map(x => x.id).join(',')}">
            </div>

            <view-for variable="f" in="flight.flights" static>
                <div class="flight-title-bar">

                    <div class="flight-title flight-inline">
                        <view-eval value="f.fromAirportCode"></view-eval>
                        <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                        <view-eval value="f.toAirportCode"></view-eval>
                    </div>

                    <div class="flight-code">
                        <view-eval value="f.flightDisplayCode"></view-eval>
                    </div>

                </div>

                <div class="flight-start flight-inline">
                    <view-eval value="f.flightDisplayName"></view-eval>
                </div>

                <div class="flight-start flight-inline">
                    <span class="flight-no-accent">Начало в</span>
                    <view-eval value="f.formattedDateStart"></view-eval>
                </div>

                <div class="flight-end flight-inline">
                    <span class="flight-no-accent">Окончание в</span>
                    <view-eval value="f.formattedDateEnd"></view-eval>
                </div>
            </view-for>


            <br>
            <div class="flight-data">
                <view-if condition="flight.children.length > 1" static>
                    <view-then>Несколько стыковых рейсов</view-then>
                    <view-else>Прямой рейс</view-else>
                </view-if>
            </div>
        </div>
    </view-for>

    <br>
    <div class="form-buttons">
        <button type="button" id="order" class="order-button">Забронировать</button>
    </div>

</app-view>
